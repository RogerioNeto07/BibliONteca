{% extends "global/base.html" %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'styles/home.css' %}">
<link rel="stylesheet" href="{% static 'styles/filter.css' %}">

{% endblock %}


{% block content %}
<div class="content-width">
    <div class="header-content-filter">
        <h1 class="h1 regular">Livros</h1>
        <div class="content-filter-right">
            <button id="openFilterBtn" class="bnt bnt-filter bg-dark-blue white">
                Filtrar<i class="material-icons">filter_alt</i>
            </button>
            <div class="input-coat">
                <input type="text" placeholder="Pesquisar" class="input-search">
                <a href="{% url 'user:pesquisa' %}"><i class="material-icons blue search-icon">search</i></a>
            </div>
        </div>
    </div>
    <div id="filterOverlay" class="filter-overlay hidden">
        <div class="filter-content">
            <button id="closeFilterBtn" class="close-btn">&times;</button>
            <h2 class="filter-title">Encontre seu Livro!</h2>
            <form id="filterForm">
                <div class="form-group-row">
                    <div class="form-group">
                        <label for="bookName">Nome do Livro:</label>
                        <input type="text" id="bookName" class="input-field" placeholder="Digite o nome do livro">
                    </div>
                    <div class="form-group">
                        <label for="authorName">Nome do Autor:</label>
                        <input type="text" id="authorName" class="input-field" placeholder="Digite o nome do autor">
                    </div>
                </div>
                <div class="form-group-row">
                    <div class="form-group">
                        <label for="genre">Gênero:</label>
                        <select id="genre" class="input-field">
                            <option value="" disabled selected>Selecione o gênero</option>
                            <option value="ficcao">Ficção</option>
                            <option value="fantasia">Fantasia</option>
                            <option value="romance">Romance</option>
                            <option value="suspense">Suspense</option>
                            <option value="aventura">Aventura</option>
                            <option value="ciencia">Ciência</option>
                            <option value="outro">Outro</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="year">Ano de Publicação:</label>
                        <input type="text" class="input-field" maxlength="4" pattern="\d*" placeholder="Digite o ano" />
                    </div>
                    <div class="form-group">
                        <label for="availability">Status:</label>
                        <select id="availability" class="input-field">
                            <option value="all">Todos</option>
                            <option value="available">Emprestado</option>
                            <option value="unavailable">Disponível</option>
                        </select>
                    </div>
                </div>
                <div class="form-buttons">
                    <button type="submit" id="bnt-filtro" class="bnt bnt-filtro bg-dark-blue white"><a href="{% url 'user:pesquisa' %}">Filtrar</a></button>
                </div>
            </form>
        </div>
    </div>
    <div class="indicadores-line">
        <hr class="line-separator">
        <p class="indicadores-label">Indicadores:</p>
        <div class="status-wrapper">
            <span class="status-dot borrowed"></span>
            <p class="status-label">Emprestado</p>
            <span class="status-dot-green"></span>
            <p class="status-label-disponivel">Disponível</p>
        </div>
    </div>
    <p class="h3 bold">Recém-Chegados</p>
    <section class="book-section">
        <div class="book-carousel">
            <button class="carousel-btn prev-btn">❮</button>
            <div class="carousel-track">
                {% for livro in livros_chegados  %}
                    <a href="{% url 'library:detail-books' livro.id %}">
                        <div class="book-card">
                            <div class="status-wrapper">
                                <span class="status-dot-green"></span>
                                <p class="status-label-disponivel">Disponível</p>
                            </div>
                            <img src="{{livro.capa.url}}"
                                alt="Livro">
                            <p class="h3 bold">{{livro.titulo}} - {{livro.subtitulo}}</p>
                            <p>{{livro.autor}}</p>
                            <div class="rating">
                                <span class="stars">★★★★☆</span>
                                <span class="review-count">(10)</span>
                            </div>
                        </div>
                    </a>
                {% endfor %}
            </div>
            <button class="carousel-btn next-btn">❯</button>
        </div>
    </section>
    {% for categoria, livros in livros_por_categoria.items %}
    <section class="book-section">
        <h2 class="category-title">{{ categoria }}</h2>  <!-- Exibe o nome da categoria -->
        <div class="book-carousel">
            <button class="carousel-btn prev-btn">❮</button>
            <div class="carousel-track">
                {% for livro in livros %}
                    <div class="book-card">
                        <div class="status-wrapper">
                            <span class="status-dot-green"></span>
                            <p class="status-label-disponivel">Disponível</p>
                        </div>
                        <img src="{{ livro.capa.url }}" alt="Livro">
                        <p class="h3 bold">{{ livro.titulo }} - {{ livro.subtitulo }}</p>
                        <p>{{ livro.autor }}</p>
                        <div class="rating">
                            <span class="stars">★★★★☆</span>
                            <span class="review-count">(10)</span>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <button class="carousel-btn next-btn">❯</button>
        </div>
    </section>
{% endfor %}
</div>
<script src="{% static '/js/filter.js' %}"></script>
<script src="{% static '/js/home.js' %}"></script>

{% endblock content %}